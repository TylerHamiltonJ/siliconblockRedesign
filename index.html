<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="lt-ie10" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->

<head>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WQP2XD');</script>
<!-- End Google Tag Manager -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/font-awesome-4.7.0/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/main2.css" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Silicon Block Party</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <link href="css/skins/square/purple.css" rel="stylesheet">
    <script src="js/icheck.min.js"></script>
    <!--    Look into removing bootstrap - pretty sure I don't use it anymore.-->
</head>

<body class="sbp">
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WQP2XD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    <div class="main-bg">
        <div class="vid-content">
            <video playsinline autoplay muted loop poster="" id="bgvid">
                <source src="Video/cover.mp4" type="video/mp4"> </video>
        </div>
        <section id="top"></section>
        <section id="middle" class="fadeout">
            <div class="middle-text">
                <h1>Silicon Block<br/>Party</h1>
                <div class="line"></div>
                <h1 class="subtitle">Talk, Play, Party</h1> </div>
        </section>
        <section id="bottom" class="fadeout">
            <div class="form container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="button-box">
                            <button id="formOpen" class="waves-effect waves-light btn" onclick="ticketForm()">Request an invitation</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="social-row">
                <ul>
                    <li><a target="_blank" href="https://www.facebook.com/ieagency/"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                    <li><a target="_blank" href="https://instagram.com/iedigital/"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                    <li><a target="_blank" href="https://twitter.com/IEDigital"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                    <li><a href="mailto:hi@ie.com.au"><i class="fa fa-envelope" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </section>
        <div class="container form pop-up">
            <div class="row tickets-form">
                <div class="col-sm-12 formstart"> <i class="fa fa-times-circle" aria-hidden="true"></i>
                    <form id="contactform">
                        <h2>Want to attend Melbourne's<br/>most exclusive event?</h2>
                        <div class="group">
                            <input type="text" name="name" required> <span class="highlight"></span> <span class="bar"></span>
                            <label>Name</label>
                        </div>
                        <div class="group">
                            <input type="text" name="email" required> <span class="highlight"></span> <span class="bar"></span>
                            <label>Email</label>
                        </div>
                        <div class="group">
                            <input type="text" name="company" required> <span class="highlight"></span> <span class="bar"></span>
                            <label>Company</label>
                        </div>
                        <div class="radio-group">
                            <input type="radio" value="guest" id="radio1" name="iCheck" />
                            <label for="radio1" style="margin-right: 4rem;">Guest</label>
                            <input type="radio" value="sponsor" id="radio2" name="iCheck" />
                            <label for="radio2">Sponsor</label>
                        </div>
                        <button type="submit" class="waves-effect waves-light btn" id="submit">Request an invitation</button>
                    </form>
                </div>
                <div class="col-sm-12 formhidden">
                    <div class="middle-text">
                        <h1>Thank you</h1>
                        <div class="line"></div>
                        <h1 class="subtitle">We'll be in touch</h1> </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        //Exits the form when you click anywhere else.
        $(".form.pop-up").click(function () {
            $(".form.pop-up").fadeOut();
            $(".fadeout").fadeIn('fast');
        });
        // Doesn't trigger the close when you press the button.
        $(".form .row form").click(function (e) {
            e.stopPropagation();
        });

        function ticketForm() {
            $(".form.pop-up").fadeIn();
            $(".row.tickets-form").show();
            $(".fadeout").fadeOut('fast');
        }

        $( "#contactform" ).submit(function( event ) {
            $(".formstart").fadeOut(function () {
                $(".formhidden").fadeIn().delay(2000).queue(function (next) {
                    $(".form.pop-up").fadeOut(function(){
                    $(".formstart").fadeIn();
                    $(".formhidden").fadeOut(); 
                    });
                    $(".fadeout").fadeIn('fast');
                    next();
                });
            });
});
        
        function thankyou() {
            var radioTicket = $('div.radio-group div.checked input').val();
            dataLayer.push({'event': 'sbpFormSubmission','ticketType': radioTicket });
            $(".formstart").fadeOut(function () {
                $(".formhidden").fadeIn().delay(2000).queue(function (next) {
                    $(".form.pop-up").fadeOut(function(){
                    $(".formstart").fadeIn();
                    $(".formhidden").fadeOut(); 
                    });
                    $(".fadeout").fadeIn('fast');
                    next();
                });
            });
            
        }
    </script>
    <script>
        $(document).ready(function () {
            $('input').iCheck({
                checkboxClass: 'icheckbox_square-purple'
                , radioClass: 'iradio_square-purple'
            });
            
            $('#submit').on('click', function(event) {
                event.preventDefault();
                
                var params = $('#contactform').serialize();
                
                $.ajax({
                    type: "POST",
                    url: 'email.php',
                    data: params,
                    dataType: 'json'
                })
                .done(function(data) {
                    if (data.success) {
                        thankyou();
                    } else {
                        alert(data["message"])
                    }
                })
                .fail(function() {
                    alert("it died");

                })
                
            });
        });
    </script>
</body>

</html>